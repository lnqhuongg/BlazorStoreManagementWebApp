@using BlazorStoreManagementWebApp.DTOs.Admin.MaGiamGia

<div class="modal fade" id="PromoModal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content">

            <EditForm Model="@promoDTO" OnSubmit="@HandleSubmit">

                <!-- HEADER -->
                <div class="modal-header bg-success text-white">
                    <h5 class="modal-title">
                        <i class="fas fa-@(IsEditMode ? "edit" : "plus-circle")"></i>
                        @(IsEditMode ? "Chỉnh sửa mã giảm giá" : "Thêm mới mã giảm giá")
                    </h5>
                    <button type="button"
                            class="btn-close btn-close-white"
                            data-bs-dismiss="modal"></button>
                </div>

                <!-- BODY -->
                <div class="modal-body">
                    <div class="row">

                        <!-- Mã giảm giá -->
                        <div class="col-md-6 mb-3">
                            <label>Mã giảm giá *</label>
                            <InputText class="@($"form-control {(string.IsNullOrEmpty(PromoCodeError) ? "" : "is-invalid")}")"
                                       @bind-Value="promoDTO.PromoCode" />
                            <small class="text-danger">@PromoCodeError</small>
                        </div>

                        <!-- Mô tả -->
                        <div class="col-md-6 mb-3">
                            <label>Mô tả *</label>
                            <InputText class="@($"form-control {(string.IsNullOrEmpty(DescriptionError) ? "" : "is-invalid")}")"
                                       @bind-Value="promoDTO.Description" />
                            <small class="text-danger">@DescriptionError</small>
                        </div>
                        

                        <!-- Loại giảm -->
                        <div class="col-md-6 mb-3">
                            <label>Loại giảm *</label>
                            <InputSelect class="@($"form-select {(string.IsNullOrEmpty(DiscountTypeError) ? "" : "is-invalid")}")"
                                         @bind-Value="promoDTO.DiscountType">
                                <option value="">-- Chọn loại --</option>
                                <option value="percent">Phần trăm</option>
                                <option value="fixed">Giảm giá</option>
                            </InputSelect>
                            <small class="text-danger">@DiscountTypeError</small>
                        </div>

                        <!-- Giá trị -->
                        <div class="col-md-6 mb-3">
                            <label>Giá trị *</label>
                            <InputNumber class="@($"form-control {(string.IsNullOrEmpty(DiscountValueError) ? "" : "is-invalid")}")"
                                         @bind-Value="promoDTO.DiscountValue"
                                         disabled="@string.IsNullOrEmpty(promoDTO.DiscountType)" />
                            <small class="text-danger">@DiscountValueError</small>
                        </div>

                        <!-- Ngày bắt đầu -->
                        <div class="col-md-6 mb-3">
                            <label>Ngày bắt đầu *</label>
                            <InputDate class="@($"form-control {(string.IsNullOrEmpty(StartDateError) ? "" : "is-invalid")}")"
                                       @bind-Value="promoDTO.StartDate" />
                            <small class="text-danger">@StartDateError</small>
                        </div>

                        <!-- Ngày kết thúc -->
                        <div class="col-md-6 mb-3">
                            <label>Ngày kết thúc *</label>
                            <InputDate class="@($"form-control {(string.IsNullOrEmpty(EndDateError) ? "" : "is-invalid")}")"
                                       @bind-Value="promoDTO.EndDate" />
                            <small class="text-danger">@EndDateError</small>
                        </div>

                        <!-- Đơn tối thiểu -->
                        <div class="col-md-6 mb-3">
                            <label>Giá trị đơn tối thiểu</label>
                            <InputNumber class="@($"form-control {(string.IsNullOrEmpty(MinOrderAmountError) ? "" : "is-invalid")}")"
                                         @bind-Value="promoDTO.MinOrderAmount" />
                            <small class="text-danger">@MinOrderAmountError</small>
                        </div>

                        <!-- Giới hạn -->
                        <div class="col-md-6 mb-3">
                            <label>Giới hạn sử dụng *</label>
                            <InputNumber class="@($"form-control {(string.IsNullOrEmpty(UsageLimitError) ? "" : "is-invalid")}")"
                                         @bind-Value="promoDTO.UsageLimit" />
                            <small class="text-danger">@UsageLimitError</small>
                        </div>

                        <!-- Đã dùng -->
                        @if (IsEditMode)
                        {
                            <div class="col-md-6 mb-3">
                                <label>Đã dùng</label>
                                <InputNumber class="form-control"
                                             @bind-Value="promoDTO.UsedCount"
                                             disabled />
                            </div>
                        }

                        <!-- Trạng thái -->
                        <div class="col-md-6 mb-3">
                            <label>Trạng thái *</label>
                            <InputSelect class="@($"form-select {(string.IsNullOrEmpty(StatusError) ? "" : "is-invalid")}")"
                                         @bind-Value="promoDTO.Status">
                                <option value="">-- Chọn trạng thái --</option>
                                <option value="active">Hoạt động</option>
                                <option value="inactive">Tạm ngưng</option>
                            </InputSelect>
                            <small class="text-danger">@StatusError</small>
                        </div>

                    </div>
                </div>

                <!-- FOOTER -->
                <div class="modal-footer">
                    <button type="button"
                            class="btn btn-secondary"
                            data-bs-dismiss="modal">
                        Hủy
                    </button>
                    <button type="submit"
                            class="btn btn-success">
                        @(IsEditMode ? "Cập nhật" : "Thêm mới")
                    </button>
                </div>

            </EditForm>
        </div>
    </div>
</div>
